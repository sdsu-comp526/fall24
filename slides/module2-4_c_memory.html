
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>7) C memory &#8212; Computational Methods for Scientists</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'slides/module2-4_c_memory';</script>
    <link rel="icon" href="../_static/SDSU-comp526_logo.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8) Function errors" href="module3-1_function_errors.html" />
    <link rel="prev" title="6) C structs and functions" href="module2-3_c_structs_and_functions.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/SDSU-comp526_logo.svg" class="logo__image only-light" alt="Computational Methods for Scientists - Home"/>
    <script>document.write(`<img src="../_static/SDSU-comp526_logo.svg" class="logo__image only-dark" alt="Computational Methods for Scientists - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../syllabus.html">Syllabus</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../slides.html">Slides</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="module1-1_first_class.html">1) First Class: Reproducibility and Git</a></li>


<li class="toctree-l2"><a class="reference internal" href="module1-2_linux.html">2) The Linux Filesystem and commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="module1-3_functions_and_fpa.html">3) Functions</a></li>



<li class="toctree-l2"><a class="reference internal" href="module2-1_intro_to_c.html">4) Intro to C</a></li>
<li class="toctree-l2"><a class="reference internal" href="module2-2_c_pointers.html">5) Intro to C pointers</a></li>
<li class="toctree-l2"><a class="reference internal" href="module2-3_c_structs_and_functions.html">6) C structs and functions</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">7) C memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-1_function_errors.html">8) Function errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-2_conditioning.html">9) Conditioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-3_root_finding.html">10) Rootfinding</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-4_convergence_classes.html">11) Convergence classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-5_newton.html">12) Newton methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="module3-6_stability.html">13) Stability</a></li>
<li class="toctree-l2"><a class="reference internal" href="module4-1_linear_algebra.html">15) Linear Algebra</a></li>
<li class="toctree-l2"><a class="reference internal" href="module4-2_gram_schmidt.html">16) Gram-Schmidt and QR</a></li>
<li class="toctree-l2"><a class="reference internal" href="module4-3_householder.html">17) Householder QR</a></li>
<li class="toctree-l2"><a class="reference internal" href="module4-4_cholesky_qr.html">18) Cholesky QR</a></li>
<li class="toctree-l2"><a class="reference internal" href="module5-1_intro_to_fortran.html">14) Introduction to Fortran</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/sdsu-comp526/fall24" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/sdsu-comp526/fall24/issues/new?title=Issue%20on%20page%20%2Fslides/module2-4_c_memory.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/slides/module2-4_c_memory.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>7) C memory</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pass-by-value-vs-pass-by-reference">1. Pass by value Vs Pass by reference</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#call-by-value-in-c">1.1 Call by Value in C</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-call-by-value-in-c">Example of Call by Value in C</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#call-by-reference-in-c">1.2 Call by Reference in C</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-call-by-reference-in-c">Example of Call by Reference in C</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#difference-between-the-call-by-value-and-call-by-reference-in-c">Difference between the Call by Value and Call by Reference in C</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c-pools-of-memory">2. C pools of memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#static-memory">Static memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stack-memory">Stack memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#heap-memory">Heap memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-exercise">Reading exercise</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#malloc-and-calloc">3. <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-a-program-that-shows-both-malloc-and-calloc">Example of a program that shows both <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc</span></code></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="c-memory">
<h1>7) C memory<a class="headerlink" href="#c-memory" title="Link to this heading">#</a></h1>
<p>Today:</p>
<ol class="arabic simple">
<li><p>Pass by value Vs Pass by reference</p></li>
<li><p>C pools of memory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc</span></code></p></li>
</ol>
<section id="pass-by-value-vs-pass-by-reference">
<h2>1. Pass by value Vs Pass by reference<a class="headerlink" href="#pass-by-value-vs-pass-by-reference" title="Link to this heading">#</a></h2>
<p>Functions can be invoked in two ways: <strong>Call by Value</strong> or <strong>Call by Reference</strong>. These two ways are generally differentiated by the type of values <em>passed</em> to them as parameters.</p>
<p>The parameters passed to the function are called <strong>actual parameters</strong> whereas the parameters received by the function are called <strong>formal parameters</strong>.</p>
<section id="call-by-value-in-c">
<h3>1.1 Call by Value in C<a class="headerlink" href="#call-by-value-in-c" title="Link to this heading">#</a></h3>
<p>In the call by value method of parameter passing, the values of actual parameters are copied to the function’s formal parameters.</p>
<ul class="simple">
<li><p>There are two copies of parameters stored in different memory locations.</p></li>
<li><p>One is the original copy and the other is the function copy.</p></li>
<li><p>Any changes made inside functions are <em>not</em> reflected in the actual parameters of the caller.</p></li>
</ul>
<section id="example-of-call-by-value-in-c">
<h4>Example of Call by Value in C<a class="headerlink" href="#example-of-call-by-value-in-c" title="Link to this heading">#</a></h4>
<p>The following example demonstrates the call-by-value method of parameter passing</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// C program to illustrate call by value</span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1">// Function Prototype</span>
<span class="linenos"> 5</span><span class="kt">void</span><span class="w"> </span><span class="nf">swapx</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1">// Main function</span>
<span class="linenos"> 8</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="linenos"> 9</span><span class="p">{</span>
<span class="linenos">10</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">    </span><span class="c1">// Pass by Values</span>
<span class="linenos">13</span><span class="w">    </span><span class="n">swapx</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// Actual Parameters</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;In the caller:</span><span class="se">\n</span><span class="s"> a = %d b = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">18</span><span class="p">}</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="c1">// Swap functions that swaps two values</span>
<span class="linenos">21</span><span class="kt">void</span><span class="w"> </span><span class="nf">swapx</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// Formal Parameters</span>
<span class="linenos">22</span><span class="p">{</span>
<span class="linenos">23</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">    </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="linenos">26</span><span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="linenos">27</span><span class="w">    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Inside the (callee) function:</span><span class="se">\n</span><span class="s"> x = %d y = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="linenos">30</span><span class="p">}</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Inside<span class="w"> </span>the<span class="w"> </span><span class="o">(</span>callee<span class="o">)</span><span class="w"> </span><span class="k">function</span>:
<span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
In<span class="w"> </span>the<span class="w"> </span>caller:
<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span>
</pre></div>
</div>
<p>Thus the actual values of <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> remain unchanged even after swapping the values of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> in the called function.</p>
</section>
</section>
<section id="call-by-reference-in-c">
<h3>1.2 Call by Reference in C<a class="headerlink" href="#call-by-reference-in-c" title="Link to this heading">#</a></h3>
<p>In the call by reference method of parameter passing, the <em>address</em> of the actual parameters is passed to the function as the formal parameters. In C, we use pointers to achieve call-by-reference.</p>
<ul class="simple">
<li><p>Both the actual and formal parameters refer to the same locations.</p></li>
<li><p>Any changes made inside the function are reflected in the actual parameters of the caller function, too.</p></li>
</ul>
<section id="example-of-call-by-reference-in-c">
<h4>Example of Call by Reference in C<a class="headerlink" href="#example-of-call-by-reference-in-c" title="Link to this heading">#</a></h4>
<p>The following C program is an example of a call-by-reference method.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// C program to illustrate Call by Reference</span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1">// Function declaration (or prototype/signature)</span>
<span class="linenos"> 5</span><span class="kt">void</span><span class="w"> </span><span class="nf">swapx</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="p">);</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1">// Main function</span>
<span class="linenos"> 8</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="linenos"> 9</span><span class="p">{</span>
<span class="linenos">10</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">    </span><span class="c1">// Pass by reference</span>
<span class="linenos">13</span><span class="w">    </span><span class="n">swapx</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// Actual Parameters. Note that we pass directly the addresses of these two variables</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;In the caller:</span><span class="se">\n</span><span class="s"> a = %d b = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">18</span><span class="p">}</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="c1">// Function to swap two variables by reference</span>
<span class="linenos">21</span><span class="kt">void</span><span class="w"> </span><span class="nf">swapx</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// Formal Parameters</span>
<span class="linenos">22</span><span class="p">{</span>
<span class="linenos">23</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">    </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">x</span><span class="p">;</span>
<span class="linenos">26</span><span class="w">    </span><span class="o">*</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">y</span><span class="p">;</span>
<span class="linenos">27</span><span class="w">    </span><span class="o">*</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Inside the (callee) function:</span><span class="se">\n</span><span class="s"> x = %d y = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">y</span><span class="p">);</span>
<span class="linenos">30</span><span class="p">}</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Inside<span class="w"> </span>the<span class="w"> </span><span class="o">(</span>callee<span class="o">)</span><span class="w"> </span><span class="k">function</span>:
<span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
In<span class="w"> </span>the<span class="w"> </span>caller:
<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
</pre></div>
</div>
<p>Thus, the values of <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> get changed also in the caller function after swapping the values of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> inside the callee.</p>
</section>
<section id="difference-between-the-call-by-value-and-call-by-reference-in-c">
<h4>Difference between the Call by Value and Call by Reference in C<a class="headerlink" href="#difference-between-the-call-by-value-and-call-by-reference-in-c" title="Link to this heading">#</a></h4>
<p>The following table lists the differences between the call-by-value and call-by-reference methods of parameter passing.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Call/Pass By Value</p></th>
<th class="head text-center"><p>Call/Pass By Reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>While calling a function, we pass directly the values of variables to it. Such functions are known as “Call By Value”</p></td>
<td class="text-center"><p>While calling a function, instead of passing the actual values of the variables, we pass the <em>address of</em> the variables (location of variables) to the function. This is known as “Call By Reference”</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>In this method, the value of each variable in the calling function is <em>copied</em> into corresponding dummy variables in the called function</p></td>
<td class="text-center"><p>In this method, the <em>address of</em> the actual variables in the calling function is copied into the dummy variables in the called function.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>With this method, changes made to the dummy variables in the called function have <em>no effect</em> on the values of the actual variables in the calling function</p></td>
<td class="text-center"><p>With this method, using addresses (and pointers associated with them), we have access to the actual variables and hence we can <em>manipulate</em> them</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>In call-by-value, we cannot alter the values of the original variables through function calls</p></td>
<td class="text-center"><p>In call by reference, we can alter the values of variables through function calls</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Values of variables are directly passed to functions</p></td>
<td class="text-center"><p>Pointer variables are necessary in the function declaration/definition to access the addresses of the passed variables</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>This method is preferred when we have to pass some small values that should not change</p></td>
<td class="text-center"><p>This method is preferred when we have to pass a large amount of data to the function or when data need to be manipulated</p></td>
</tr>
</tbody>
</table>
</div>
<p>In conclusion, “Call/Pass by Value” means passing values as copies to the function, so that the original data is preserved and any changes made inside the function are <em>not</em> reflected in the original data, whereas “Call/Pass by Reference” means passing references to the memory locations of variables (in C, we use pointers to achieve the call by reference behavior), hence changes made inside the called function are reflected in the original caller values.</p>
</section>
</section>
</section>
<section id="c-pools-of-memory">
<h2>2. C pools of memory<a class="headerlink" href="#c-pools-of-memory" title="Link to this heading">#</a></h2>
<p>C has three different pools of memory.</p>
<ul class="simple">
<li><p><strong>static</strong>: global variable storage, permanent for the entire run of the program.</p></li>
<li><p><strong>stack</strong>: local variable storage (automatic, continuous memory).</p></li>
<li><p><strong>heap</strong>: dynamic storage (large pool of memory, not allocated in contiguous order. Can be fragmented).</p></li>
</ul>
<p><img alt="" src="../_images/c_stack_memory.jpg" /></p>
<section id="static-memory">
<h3>Static memory<a class="headerlink" href="#static-memory" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Static memory persists throughout the entire life of the program, and is usually used to store things like <em>global</em> variables, or variables created with the static clause. For example, we saw the simple declaration of an <code class="docutils literal notranslate"><span class="pre">int</span></code> variable:</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">int_var</span><span class="p">;</span>
</pre></div>
</div>
<p>On many systems this variable uses 4 bytes of memory. This memory can come from one of two places. If a variable is declared <em>outside</em> of a function, it is considered global, meaning it is accessible anywhere in the program. Global variables are <strong>static</strong>, and there is only one copy for the entire program. Inside a function the variable is allocated on the <em>stack</em>.</p>
<ul class="simple">
<li><p>It is also possible to force a variable to be static using the <code class="docutils literal notranslate"><span class="pre">static</span></code> clause. For example, the same variable created inside a function using the <code class="docutils literal notranslate"><span class="pre">static</span></code> clause would allow it to be stored in static memory.</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">int_var</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="stack-memory">
<h3>Stack memory<a class="headerlink" href="#stack-memory" title="Link to this heading">#</a></h3>
<p>The stack is used to store variables used on the inside of a function (including the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function). It’s a <strong>LIFO</strong>, “<strong>L</strong>ast-<strong>I</strong>n,-<strong>F</strong>irst-<strong>O</strong>ut”, structure. Every time a function declares a new variable it is “pushed” onto the stack. Then when a function finishes running, all the variables associated with that function on the stack are automatically deleted, and the memory they use is freed up. This leads to the <em>local</em> scope of function variables. The stack is a special region of memory, and automatically managed by the CPU – so you don’t have to allocate or deallocate memory. Stack memory is divided into successive frames where each time a function is called, it allocates itself a fresh stack frame.</p>
<ul class="simple">
<li><p>Note that there is generally a limit on the size of the stack – which can vary with the operating system (it can be, say, 8MB). If a program tries to put too much information on the stack, <strong>stack overflow</strong> will occur. Stack overflow happens when all the memory in the stack has been allocated, and further allocations begin overflowing into other sections of memory.</p></li>
</ul>
<p>A summary of the stack:</p>
<ul class="simple">
<li><p>The stack is managed by the CPU, there is no ability to modify it</p></li>
<li><p>Variables are allocated and freed automatically</p></li>
<li><p>The stack it not limitless – most have an upper bound</p></li>
<li><p>The stack grows and shrinks as variables are created and destroyed, within the limit imposed by the OS</p></li>
<li><p>Stack variables only exist whilst the function that created them exists</p></li>
</ul>
</section>
<section id="heap-memory">
<h3>Heap memory<a class="headerlink" href="#heap-memory" title="Link to this heading">#</a></h3>
<p>The <em>heap</em> is a large pool of memory that can be used dynamically, i.e, especially when you don’t know at compile time how big a variable is (for instance, think of an array that has user-defined length). This is memory that is <em>not</em> automatically managed – you have to explicitly allocate (using functions such as <code class="docutils literal notranslate"><span class="pre">malloc</span></code>), and deallocate (e.g. <code class="docutils literal notranslate"><span class="pre">free</span></code>) the memory. Failure to free the memory when you are finished with it will result in what is known as a <strong>memory leak</strong> – memory that is still “being used”, and not available to other processes. Unlike the stack, there are generally no restrictions on the size of the heap (or the variables it creates), other than the physical size of memory in the machine. Variables created on the heap are accessible anywhere in the program.</p>
<ul class="simple">
<li><p>Heap memory requires you to use pointers.</p></li>
</ul>
<p>A summary of the heap:</p>
<ul class="simple">
<li><p>The heap is managed by the programmer, the ability to modify it is somewhat boundless</p></li>
<li><p>In C, variables are allocated and freed using functions like <code class="docutils literal notranslate"><span class="pre">malloc()</span></code> and <code class="docutils literal notranslate"><span class="pre">free()</span></code></p></li>
<li><p>The heap is large, and is usually limited by the physical memory available</p></li>
<li><p>The heap requires pointers to access it</p></li>
</ul>
<p>An example of memory use:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">// global variable, stored in the static pool</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w">      </span><span class="c1">// dynamic stack storage</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="p">;</span><span class="w">  </span><span class="c1">// pointer to type char</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="linenos">12</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;stack memory: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">    </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">));</span><span class="w"> </span><span class="c1">// create heap storage (a contiguous block) and assign its address to str</span>
<span class="linenos">15</span><span class="w">    </span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;m&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// str can be seen as an array, and we assign the character &#39;m&#39; to its first entry</span>
<span class="linenos">16</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;heap memory: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="linenos">17</span><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<span class="linenos">18</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">19</span><span class="p">}</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>stack<span class="w"> </span>memory:<span class="w"> </span><span class="m">4</span>
heap<span class="w"> </span>memory:<span class="w"> </span>m
</pre></div>
</div>
<p>The variable <code class="docutils literal notranslate"><span class="pre">x</span></code> is <em>static</em> storage, because of its global nature. Both <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> are dynamic <em>stack</em> storage which is deallocated when the program ends. The function <code class="docutils literal notranslate"><span class="pre">malloc()</span></code> is used to allocate 100 pieces of of dynamic <em>heap</em> storage, each the size of char, to <code class="docutils literal notranslate"><span class="pre">str</span></code>. Conversely, the function <code class="docutils literal notranslate"><span class="pre">free()</span></code>, deallocates the memory associated with <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p>
<p><img alt="" src="../_images/c_stack_memory_example.jpg" /></p>
</section>
<section id="reading-exercise">
<h3>Reading exercise<a class="headerlink" href="#reading-exercise" title="Link to this heading">#</a></h3>
<p>For the advantages and disadvantages of using one type of memory rather than another, please see this <a class="reference external" href="https://www.geeksforgeeks.org/stack-vs-heap-memory-allocation/">resource</a>.</p>
</section>
</section>
<section id="malloc-and-calloc">
<h2>3. <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc</span></code><a class="headerlink" href="#malloc-and-calloc" title="Link to this heading">#</a></h2>
<p>In the previous example, we have seen an example of usage of the function <code class="docutils literal notranslate"><span class="pre">malloc()</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">malloc()</span></code> allocates a memory block of given size (in bytes).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">malloc()</span></code> returns a pointer to the beginning of the allocated block.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">malloc()</span></code> doesn’t initialize the allocated memory. If you try to read from the allocated memory without first initializing it, then you will invoke undefined behavior, which usually means the values you read will be garbage values.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">calloc()</span></code> allocates the memory and also initializes every byte in the allocated memory to 0.</p></li>
<li><p>If you try to read the value of the allocated memory without initializing it, you’ll get 0 as it has already been initialized to 0 by <code class="docutils literal notranslate"><span class="pre">calloc()</span></code>.</p></li>
</ul>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">malloc()</span></code>, <code class="docutils literal notranslate"><span class="pre">calloc()</span></code> takes two arguments:</p>
<ul class="simple">
<li><p>Number of blocks to be allocated.</p></li>
<li><p>Size of each block in bytes.</p></li>
</ul>
<p><strong>Return Value:</strong></p>
<p>After successful allocation in <code class="docutils literal notranslate"><span class="pre">malloc()</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc()</span></code>, a pointer to the block of memory is returned otherwise <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is returned which indicates failure.</p>
<section id="example-of-a-program-that-shows-both-malloc-and-calloc">
<h3>Example of a program that shows both <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc</span></code><a class="headerlink" href="#example-of-a-program-that-shows-both-malloc-and-calloc" title="Link to this heading">#</a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// C code that demonstrates the difference</span>
<span class="linenos"> 2</span><span class="c1">// between calloc and malloc</span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="linenos"> 7</span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="c1">// Both of these allocate the same number of bytes,</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="c1">// which is the amount of bytes that is required to</span>
<span class="linenos">10</span><span class="w">    </span><span class="c1">// store 5 int values.</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">    </span><span class="c1">// The memory allocated by calloc will be</span>
<span class="linenos">13</span><span class="w">    </span><span class="c1">// zero-initialized, but the memory allocated with</span>
<span class="linenos">14</span><span class="w">    </span><span class="c1">// malloc will be uninitialized so reading it would be</span>
<span class="linenos">15</span><span class="w">    </span><span class="c1">// undefined behavior.</span>
<span class="linenos">16</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">allocated_with_malloc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="linenos">17</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">allocated_with_calloc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calloc</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">    </span><span class="c1">// As you can see, all of the values are initialized to</span>
<span class="linenos">20</span><span class="w">    </span><span class="c1">// zero.</span>
<span class="linenos">21</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Values of allocated_with_calloc: &quot;</span><span class="p">);</span>
<span class="linenos">22</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">23</span><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">allocated_with_calloc</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="linenos">24</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">25</span><span class="w">    </span><span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="w">    </span><span class="c1">// This malloc requests 1 terabyte of dynamic memory,</span>
<span class="linenos">28</span><span class="w">    </span><span class="c1">// which is unavailable in this case, and so the</span>
<span class="linenos">29</span><span class="w">    </span><span class="c1">// allocation fails and returns NULL.</span>
<span class="linenos">30</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">failed_malloc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">1000000000000</span><span class="p">);</span>
<span class="linenos">31</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">failed_malloc</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">32</span><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;The allocation failed, the value of &quot;</span>
<span class="linenos">33</span><span class="w">               </span><span class="s">&quot;failed_malloc is: %p </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="linenos">34</span><span class="w">               </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">failed_malloc</span><span class="p">);</span>
<span class="linenos">35</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="w">    </span><span class="c1">// Remember to always free dynamically allocated memory.</span>
<span class="linenos">38</span><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">allocated_with_malloc</span><span class="p">);</span>
<span class="linenos">39</span><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">allocated_with_calloc</span><span class="p">);</span>
<span class="linenos">40</span><span class="p">}</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Values<span class="w"> </span>of<span class="w"> </span>allocated_with_calloc:<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
The<span class="w"> </span>allocation<span class="w"> </span>failed,<span class="w"> </span>the<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span>failed_malloc<span class="w"> </span>is:<span class="w"> </span><span class="o">(</span>nil<span class="o">)</span>
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "sdsu-comp526/fall24",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./slides"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="module2-3_c_structs_and_functions.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">6) C structs and functions</p>
      </div>
    </a>
    <a class="right-next"
       href="module3-1_function_errors.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">8) Function errors</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pass-by-value-vs-pass-by-reference">1. Pass by value Vs Pass by reference</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#call-by-value-in-c">1.1 Call by Value in C</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-call-by-value-in-c">Example of Call by Value in C</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#call-by-reference-in-c">1.2 Call by Reference in C</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-call-by-reference-in-c">Example of Call by Reference in C</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#difference-between-the-call-by-value-and-call-by-reference-in-c">Difference between the Call by Value and Call by Reference in C</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c-pools-of-memory">2. C pools of memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#static-memory">Static memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stack-memory">Stack memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#heap-memory">Heap memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-exercise">Reading exercise</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#malloc-and-calloc">3. <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-of-a-program-that-shows-both-malloc-and-calloc">Example of a program that shows both <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">calloc</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Valeria Barra
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>